# .htaccess for SEO-friendly URLs and performance

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # 1. Remove .php extension from URLs
    # Redirects requests for file.php to /file
    RewriteCond %{THE_REQUEST} \s/+(.+?)\.php[\s?] [NC]
    RewriteRule ^ %1 [R=301,L]

    # Internally rewrite /file to file.php
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI}\.php -f
    RewriteRule ^(.*?)/?$ $1.php [L]

    # 2. Define custom friendly URLs
    # Example: Rewrite /constituency to index.php
    RewriteRule ^constituency/?$ index.php [L]

    # Example: Rewrite /candidate/john-doe to candidate.php?slug=john-doe
    # This requires more logic in candidate.php to handle the 'slug'
    RewriteRule ^candidate/([a-z0-9-]+)/?$ candidate.php?slug=$1 [L]

    # Example: Rewrite /blog/post-title to blogs.php?post=post-title
    # This requires more logic in blogs.php to handle the 'post'
    RewriteRule ^blog/([a-z0-9-]+)/?$ blogs.php?post=$1 [L]

</IfModule>

<IfModule mod_expires.c>
    # 3. Browser Caching (Leverage browser caching)
    ExpiresActive On
    ExpiresByType image/jpg "access 1 year"
    ExpiresByType image/jpeg "access 1 year"
    ExpiresByType image/gif "access 1 year"
    ExpiresByType image/png "access 1 year"
    ExpiresByType image/webp "access 1 year"
    ExpiresByType image/svg+xml "access 1 year"
    ExpiresByType text/css "access 1 month"
    ExpiresByType application/pdf "access 1 month"
    ExpiresByType application/javascript "access 1 month"
    ExpiresByType application/x-javascript "access 1 month"
    ExpiresByType application/x-shockwave-flash "access 1 month"
    ExpiresByType image/x-icon "access 1 year"
    ExpiresDefault "access 2 days"
</IfModule>

<IfModule mod_deflate.c>
    # 4. Compress output files (Gzip compression)
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
    AddOutputFilterByType DEFLATE application/x-font
    AddOutputFilterByType DEFLATE application/x-font-opentype
    AddOutputFilterByType DEFLATE application/x-font-truetype
    AddOutputFilterByType DEFLATE application/x-font-ttf
    AddOutputFilterByType DEFLATE application/x-javascript
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE font/opentype
    AddOutputFilterByType DEFLATE font/otf
    AddOutputFilterByType DEFLATE font/ttf
    AddOutputFilterByType DEFLATE image/svg+xml
    AddOutputFilterByType DEFLATE image/x-icon
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/javascript
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/xml
</IfModule>
